use super::{ApiType, Provider, ProviderConfig};
use anyhow::Result;
use llm_connector::LlmClient;

/// Moonshot Provider implementation
#[allow(dead_code)]
pub struct MoonshotProvider;

impl Provider for MoonshotProvider {
    fn name() -> &'static str {
        "moonshot"
    }
    
    fn create_client(config: &ProviderConfig) -> Result<LlmClient> {
        let base_url = config.base_url.as_deref()
            .unwrap_or("https://api.moonshot.cn/v1");
        Ok(LlmClient::openai_compatible(&config.api_key, base_url, Self::name())?)
    }
    
    fn default_model() -> &'static str {
        "kimi-k2-turbo-preview"
    }
    
    fn env_var_name() -> &'static str {
        "MOONSHOT_API_KEY"
    }
    
    fn api_type() -> ApiType {
        ApiType::OpenAICompatible
    }
    
    fn requires_api_key() -> bool {
        true
    }
    
    fn requires_base_url() -> bool {
        false
    }
    
    fn default_base_url() -> Option<&'static str> {
        Some("https://api.moonshot.cn/v1")
    }
}

